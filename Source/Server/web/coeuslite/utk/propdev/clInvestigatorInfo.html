<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0045)http://localhost:8080/coeus/getUnitDetails.do -->
<HTML><HEAD><TITLE>Coeus Web Application</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1"><LINK 
href="../../../../../Documents%20and%20Settings/Coeus%20User/My%20Documents/My%20Webs/workOnTemplate_files/coeus_styles.css" type=text/css rel=stylesheet>
<META content="MSHTML 6.00.2900.2873" name=GENERATOR></HEAD>
<BODY text=#000000 vLink=#023264 aLink=#023264 link=#023264 bgColor=#376daa>
<TABLE height="100%" cellSpacing=0 cellPadding=0 align=center border=0>
  <TR>
    <TD vAlign=top align=left width=975>
      <TABLE width="100%">
        <TBODY>
        <TR>
          <TD>
            <SCRIPT language=javaScript src="/coeus42/coeuslite/mit/utils/scriptsUSCalendar.js" 
            type=text/JavaScript></SCRIPT>

            <SCRIPT>
                                 
                function open_search_window(link,windowName){
                    var winleft = (screen.width - 650) / 2;
                    var winUp = (screen.height - 450) / 2;  
                    var win = "scrollbars=1,resizable=0,width=800,height=450,left="+winleft+",top="+winUp
                    if(windowName == "Award"){
                        sList = window.open('/coeus'+"/"+link, "list", win);
                    }else if(windowName == "Sponsor"){
                        win = "scrollbars=1,resizable=0,width=825,height=450,left="+winleft+",top="+winUp
                        sList = window.open('/coeus'+"/"+link, "list", win);
                    }else if(windowName == "primeSponsor"){
                        win = "scrollbars=1,resizable=0,width=825,height=450,left="+winleft+",top="+winUp
                        sList = window.open('/coeus'+"/"+link, "list", win);
                    }
                }
                
                function fetch_Data(result,searchType){                                     
                    if(searchType == "PersonSearch"){
                        document.generalInfoProposal.contactFirstName.value = result["FIRST_NAME"] ;
                        document.generalInfoProposal.contactLastName.value = result["LAST_NAME"]; 
                        var email = result["EMAIL_ADDRESS"];
                        var phone = result["OFFICE_PHONE"];
                        if(email == "null"){                       
                        document.generalInfoProposal.contactEmail.value ="";
                        }else{
                        document.generalInfoProposal.contactEmail.value = result["EMAIL_ADDRESS"];
                        }
                        if(phone == "null"){
                         document.generalInfoProposal.contactPhone.value ="";
                        }else{
                        document.generalInfoProposal.contactPhone.value = result["OFFICE_PHONE"];
                        }
                    }else if(searchType == "AwardSearch"){
                        document.generalInfoProposal.awardNumber.value = result["MIT_AWARD_NUMBER"] ;
                    }else if(searchType == "SponsorSearch"){                        
                        document.generalInfoProposal.sponsorCode.value = result["SPONSOR_CODE"] ;
                        document.generalInfoProposal.sponsorName.value = result["SPONSOR_NAME"] ;
                    }else if(searchType == "PrimeSponsorSearch"){                        
                        document.generalInfoProposal.primeSponsorCode.value = result["SPONSOR_CODE"] ;
                        document.generalInfoProposal.primeSponsorName.value = result["SPONSOR_NAME"] ;
                    }
                 }
                 
             function validateForm(form) {             
            //Convert begin and end date values to numeric value to compare
            var var_init_begin_date = new Date(form.startDate.value.substring(6,10),
                                               form.startDate.value.substring(0,2)-1,
                                               form.startDate.value.substring(3,5));           
        
            var var_init_end_date = new Date(form.endDate.value.substring(6,10),
                                             form.endDate.value.substring(0,2)-1,
                                             form.endDate.value.substring(3,5));
                                             
            var init_difference = var_init_end_date.getTime() - var_init_begin_date.getTime(); 
            var validate = true;         
                     
             //return validateGeneralInfoProposal(form); 
  
            if(validateGeneralInfoProposal(form)){
               if (Math.round(init_difference) < Math.round(1) && Math.round(init_difference)!= Math.round(0)){                        
                alert("The initial end date must occur after the initial start date");
                form.startDate.focus();
                return false;
             } 
            }else{
            return false;
            }
          }
    </SCRIPT>

            <SCRIPT language=Javascript1.1 type=text/javascript> 

<!-- Begin 

     var bCancel = false; 

    function validateGeneralInfoProposal(form) {                                                                   
        if (bCancel) 
      return true; 
        else 
 var formValidationResult;
       formValidationResult = validateRequired(form) && validateDate(form); 
     return (formValidationResult == 1);
   } 

    function generalInfoProposal_required () { 
     this.a0 = new Array("title", "Title is required", new Function ("varName", " return this[varName];"));
     this.a1 = new Array("startDate", "Start Date is required.", new Function ("varName", "this.datePattern='MM/dd/yyyy';  return this[varName];"));
     this.a2 = new Array("endDate", "End Date is required.", new Function ("varName", "this.datePattern='MM/dd/yyyy';  return this[varName];"));
    } 

    function generalInfoProposal_DateValidations () { 
     this.a0 = new Array("startDate", "Start Date is not a valid date.", new Function ("varName", "this.datePattern='MM/dd/yyyy';  return this[varName];"));
     this.a1 = new Array("endDate", "End Date is not a valid date.", new Function ("varName", "this.datePattern='MM/dd/yyyy';  return this[varName];"));
    } 




   /*$RCSfile: validateFloatRange.js,v $ $Revision: 1.9 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are in a valid float range.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateFloatRange(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 

        oRange = eval('new ' + formName.value + '_floatRange()');
        for (x in oRange) {
            var field = form[oRange[x][0]];
            
            if ((field.type == 'hidden' ||
                field.type == 'text' || field.type == 'textarea') &&
                (field.value.length > 0)  &&
                 field.disabled == false) {
        
                var fMin = parseFloat(oRange[x][2]("min"));
                var fMax = parseFloat(oRange[x][2]("max"));
                var fValue = parseFloat(field.value);
                if (!(fValue >= fMin && fValue <= fMax)) {
                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oRange[x][1];
                    isValid = false;
                }
            }
        }
        if (fields.length > 0) {
            focusField.focus();
            alert(fields.join('\n'));
        }
        return isValid;
    }

    /*$RCSfile: validateUtilities.js,v $ $Revision: 1.2 $ $Date: 2004/03/28 16:53:21 $ */

  /**
  * This is a place holder for common utilities used across the javascript validation
  *
  **/


    /*$RCSfile: validateByte.js,v $ $Revision: 1.9 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid byte.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateByte(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 
        oByte = eval('new ' + formName.value + '_ByteValidations()');

        for (x in oByte) {
            var field = form[oByte[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea' ||
                field.type == 'select-one' ||
                field.type == 'radio')  &&
                field.disabled == false) {

                var value = '';
                // get field's value
                if (field.type == "select-one") {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                } else {
                    value = field.value;
                }

                if (value.length > 0) {
                    if (!isAllDigits(value)) {
                        bValid = false;
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oByte[x][1];

                    } else {

                        var iValue = parseInt(value);
                        if (isNaN(iValue) || !(iValue >= -128 && iValue <= 127)) {
                            if (i == 0) {
                                focusField = field;
                            }
                            fields[i++] = oByte[x][1];
                            bValid = false;
                        }
                    }
                }

            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return bValid;
    }


    /*$RCSfile: validateMaxLength.js,v $ $Revision: 1.10 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * A field is considered valid if less than the specified maximum.
    * Fields are not checked if they are disabled.
    * <p>
    * <strong>Caution:</strong> Using <code>validateMaxLength</code> on a password field in a 
    *  login page gives unnecessary information away to hackers. While it only slightly
    *  weakens security, we suggest using it only when modifying a password.</p>
    * @param form The form validation is taking place on.
    */
    function validateMaxLength(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 

        oMaxLength = eval('new ' + formName.value + '_maxlength()');        
        for (x in oMaxLength) {
            var field = form[oMaxLength[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'password' ||
                field.type == 'textarea') &&
                field.disabled == false) {

                var iMax = parseInt(oMaxLength[x][2]("maxlength"));
                if (field.value.length > iMax) {
                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oMaxLength[x][1];
                    isValid = false;
                }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return isValid;
    }


    /*$RCSfile: validateRequired.js,v $ $Revision: 1.13 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    *  Check to see if fields must contain a value.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */

    function validateRequired(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name");

        oRequired = eval('new ' + formName.value + '_required()');

        for (x in oRequired) {
            var field = form[oRequired[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea' ||
                field.type == 'file' ||
                field.type == 'checkbox' ||
                field.type == 'select-one' ||
                field.type == 'password') &&
                field.disabled == false) {

                var value = '';
                // get field's value
                if (field.type == "select-one") {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                } else if (field.type == 'checkbox') {
                    if (field.checked) {
                        value = field.value;
                    }
                } else {
                    value = field.value;
                }

                if (trim(value).length == 0) {

                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oRequired[x][1];
                    isValid = false;
                }
            } else if (field.type == "select-multiple") { 
                var numOptions = field.options.length;
                lastSelected=-1;
                for(loop=numOptions-1;loop>=0;loop--) {
                    if(field.options[loop].selected) {
                        lastSelected = loop;
                        value = field.options[loop].value;
                        break;
                    }
                }
                if(lastSelected < 0 || trim(value).length == 0) {
                    if(i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oRequired[x][1];
                    isValid=false;
                }
            } else if ((field.length > 0) && (field[0].type == 'radio' || field[0].type == 'checkbox')) {
                isChecked=-1;
                for (loop=0;loop < field.length;loop++) {
                    if (field[loop].checked) {
                        isChecked=loop;
                        break; // only one needs to be checked
                    }
                }
                if (isChecked < 0) {
                    if (i == 0) {
                        focusField = field[0];
                    }
                    fields[i++] = oRequired[x][1];
                    isValid=false;
                }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return isValid;
    }
    
    // Trim whitespace from left and right sides of s.
    function trim(s) {
        return s.replace( /^\s*/, "" ).replace( /\s*$/, "" );
    }


    /*$RCSfile: validateInteger.js,v $ $Revision: 1.9 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid integer.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateInteger(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 

        oInteger = eval('new ' + formName.value + '_IntegerValidations()');
        for (x in oInteger) {
            var field = form[oInteger[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea' ||
                field.type == 'select-one' ||
                field.type == 'radio') &&
                field.disabled == false) {

                var value = '';
                // get field's value
                if (field.type == "select-one") {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                } else {
                    value = field.value;
                }

                if (value.length > 0) {

                    if (!isAllDigits(value)) {
                        bValid = false;
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oInteger[x][1];

                    } else {
                        var iValue = parseInt(value);
                        if (isNaN(iValue) || !(iValue >= -2147483648 && iValue <= 2147483647)) {
                            if (i == 0) {
                                focusField = field;
                            }
                            fields[i++] = oInteger[x][1];
                            bValid = false;
                       }
                   }
               }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return bValid;
    }

    function isAllDigits(argvalue) {
        argvalue = argvalue.toString();
        var validChars = "0123456789";
        var startFrom = 0;
        if (argvalue.substring(0, 2) == "0x") {
           validChars = "0123456789abcdefABCDEF";
           startFrom = 2;
        } else if (argvalue.charAt(0) == "0") {
           validChars = "01234567";
           startFrom = 1;
        } else if (argvalue.charAt(0) == "-") {
            startFrom = 1;
        }

        for (var n = startFrom; n < argvalue.length; n++) {
            if (validChars.indexOf(argvalue.substring(n, n+1)) == -1) return false;
        }
        return true;
    }


    /*$RCSfile: validateCreditCard.js,v $ $Revision: 1.8 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid creditcard number based on Luhn checksum.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateCreditCard(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name");

        oCreditCard = eval('new ' + formName.value + '_creditCard()');

        for (x in oCreditCard) {
            if ((form[oCreditCard[x][0]].type == 'text' ||
                 form[oCreditCard[x][0]].type == 'textarea') &&
                (form[oCreditCard[x][0]].value.length > 0)  &&
                 form[oCreditCard[x][0]].disabled == false) {
                if (!luhnCheck(form[oCreditCard[x][0]].value)) {
                    if (i == 0) {
                        focusField = form[oCreditCard[x][0]];
                    }
                    fields[i++] = oCreditCard[x][1];
                    bValid = false;
                }
            }
        }
        if (fields.length > 0) {
            focusField.focus();
            alert(fields.join('\n'));
        }
        return bValid;
    }

    /**
     * Checks whether a given credit card number has a valid Luhn checksum.
     * This allows you to spot most randomly made-up or garbled credit card numbers immediately.
     * Reference: http://www.speech.cs.cmu.edu/~sburke/pub/luhn_lib.html
     */
    function luhnCheck(cardNumber) {
        if (isLuhnNum(cardNumber)) {
            var no_digit = cardNumber.length;
            var oddoeven = no_digit & 1;
            var sum = 0;
            for (var count = 0; count < no_digit; count++) {
                var digit = parseInt(cardNumber.charAt(count));
                if (!((count & 1) ^ oddoeven)) {
                    digit *= 2;
                    if (digit > 9) digit -= 9;
                };
                sum += digit;
            };
            if (sum == 0) return false;
            if (sum % 10 == 0) return true;
        };
        return false;
    }

    function isLuhnNum(argvalue) {
        argvalue = argvalue.toString();
        if (argvalue.length == 0) {
            return false;
        }
        for (var n = 0; n < argvalue.length; n++) {
            if ((argvalue.substring(n, n+1) < "0") ||
                (argvalue.substring(n,n+1) > "9")) {
                return false;
            }
        }
        return true;
    }


   /*$RCSfile: validateDate.js,v $ $Revision: 1.10 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid date.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateDate(form) {
       var bValid = true;
       var focusField = null;
       var i = 0;
       var fields = new Array();
       var formName = form.getAttributeNode("name"); 

       oDate = eval('new ' + formName.value + '_DateValidations()');

       for (x in oDate) {
           var field = form[oDate[x][0]];
           var value = field.value;
           var datePattern = oDate[x][2]("datePatternStrict");
           // try loose pattern
           if (datePattern == null)
               datePattern = oDate[x][2]("datePattern");
           if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea') &&
               (value.length > 0) && (datePattern.length > 0) &&
                field.disabled == false) {
                 var MONTH = "MM";
                 var DAY = "dd";
                 var YEAR = "yyyy";
                 var orderMonth = datePattern.indexOf(MONTH);
                 var orderDay = datePattern.indexOf(DAY);
                 var orderYear = datePattern.indexOf(YEAR);
                 if ((orderDay < orderYear && orderDay > orderMonth)) {
                     var iDelim1 = orderMonth + MONTH.length;
                     var iDelim2 = orderDay + DAY.length;
                     var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
                     var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
                     if (iDelim1 == orderDay && iDelim2 == orderYear) {
                        dateRegexp = new RegExp("^(\\d{2})(\\d{2})(\\d{4})$");
                     } else if (iDelim1 == orderDay) {
                        dateRegexp = new RegExp("^(\\d{2})(\\d{2})[" + delim2 + "](\\d{4})$");
                     } else if (iDelim2 == orderYear) {
                        dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})(\\d{4})$");
                     } else {
                        dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{4})$");
                     }
                     var matched = dateRegexp.exec(value);
                     if(matched != null) {
                        if (!isValidDate(matched[2], matched[1], matched[3])) {
                           if (i == 0) {
                               focusField = field;
                           }
                           fields[i++] = oDate[x][1];
                           bValid =  false;
                        }
                     } else {
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oDate[x][1];
                        bValid =  false;
                     }
                 } else if ((orderMonth < orderYear && orderMonth > orderDay)) {
                     var iDelim1 = orderDay + DAY.length;
                     var iDelim2 = orderMonth + MONTH.length;
                     var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
                     var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
                     if (iDelim1 == orderMonth && iDelim2 == orderYear) {
                         dateRegexp = new RegExp("^(\\d{2})(\\d{2})(\\d{4})$");
                     } else if (iDelim1 == orderMonth) {
                         dateRegexp = new RegExp("^(\\d{2})(\\d{2})[" + delim2 + "](\\d{4})$");
                     } else if (iDelim2 == orderYear) {
                         dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})(\\d{4})$");
                     } else {
                         dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{4})$");
                     }
                     var matched = dateRegexp.exec(value);
                     if(matched != null) {
                         if (!isValidDate(matched[1], matched[2], matched[3])) {
                             if (i == 0) {
                         focusField = field;
                             }
                             fields[i++] = oDate[x][1];
                             bValid =  false;
                          }
                     } else {
                         if (i == 0) {
                             focusField = field;
                         }
                         fields[i++] = oDate[x][1];
                         bValid =  false;
                     }
                 } else if ((orderMonth > orderYear && orderMonth < orderDay)) {
                     var iDelim1 = orderYear + YEAR.length;
                     var iDelim2 = orderMonth + MONTH.length;
                     var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
                     var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
                     if (iDelim1 == orderMonth && iDelim2 == orderDay) {
                         dateRegexp = new RegExp("^(\\d{4})(\\d{2})(\\d{2})$");
                     } else if (iDelim1 == orderMonth) {
                         dateRegexp = new RegExp("^(\\d{4})(\\d{2})[" + delim2 + "](\\d{2})$");
                     } else if (iDelim2 == orderDay) {
                         dateRegexp = new RegExp("^(\\d{4})[" + delim1 + "](\\d{2})(\\d{2})$");
                     } else {
                         dateRegexp = new RegExp("^(\\d{4})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{2})$");
                     }
                     var matched = dateRegexp.exec(value);
                     if(matched != null) {
                         if (!isValidDate(matched[3], matched[2], matched[1])) {
                             if (i == 0) {
                                 focusField = field;
                             }
                             fields[i++] = oDate[x][1];
                             bValid =  false;
                         }
                     } else {
                          if (i == 0) {
                              focusField = field;
                          }
                          fields[i++] = oDate[x][1];
                          bValid =  false;
                     }
                 } else {
                     if (i == 0) {
                         focusField = field;
                     }
                     fields[i++] = oDate[x][1];
                     bValid =  false;
                 }
          }
       }
       if (fields.length > 0) {
          focusField.focus();
          alert(fields.join('\n'));
       }
       return bValid;
    }
    
    function isValidDate(day, month, year) {
	    if (month < 1 || month > 12) {
            return false;
        }
        if (day < 1 || day > 31) {
            return false;
        }
        if ((month == 4 || month == 6 || month == 9 || month == 11) &&
            (day == 31)) {
            return false;
        }
        if (month == 2) {
            var leap = (year % 4 == 0 &&
               (year % 100 != 0 || year % 400 == 0));
            if (day>29 || (day == 29 && !leap)) {
                return false;
            }
        }
        return true;
    }


    /*$RCSfile: validateIntRange.js,v $ $Revision: 1.10 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields is in a valid integer range.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateIntRange(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 

        oRange = eval('new ' + formName.value + '_intRange()');        
        for (x in oRange) {
            var field = form[oRange[x][0]];
            if (field.disabled == false)  {
                var value = '';
                if (field.type == 'hidden' ||
                    field.type == 'text' || field.type == 'textarea' ||
                    field.type == 'radio' ) {
                    value = field.value;
                }
                if (field.type == 'select-one') {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                }
                if (value.length > 0) {
                    var iMin = parseInt(oRange[x][2]("min"));
                    var iMax = parseInt(oRange[x][2]("max"));
                    var iValue = parseInt(value);
                    if (!(iValue >= iMin && iValue <= iMax)) {
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oRange[x][1];
                        isValid = false;
                    }
                }
            }
        }
        if (fields.length > 0) {
            focusField.focus();
            alert(fields.join('\n'));
        }
        return isValid;
    }


    /*$RCSfile: validateShort.js,v $ $Revision: 1.9 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    *  Check to see if fields are a valid short.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateShort(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name");

        oShort = eval('new ' + formName.value + '_ShortValidations()');

        for (x in oShort) {
            var field = form[oShort[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea' ||
                field.type == 'select-one' ||
                field.type == 'radio')  &&
                field.disabled == false) {

                var value = '';
                // get field's value
                if (field.type == "select-one") {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                } else {
                    value = field.value;
                }

                if (value.length > 0) {
                    if (!isAllDigits(value)) {
                        bValid = false;
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oShort[x][1];

                    } else {

                        var iValue = parseInt(value);
                        if (isNaN(iValue) || !(iValue >= -32768 && iValue <= 32767)) {
                            if (i == 0) {
                                focusField = field;
                            }
                            fields[i++] = oShort[x][1];
                            bValid = false;
                        }
                   }
               }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return bValid;
    }


    /*$RCSfile: validateFloat.js,v $ $Revision: 1.11 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid float.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateFloat(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
         var formName = form.getAttributeNode("name");

        oFloat = eval('new ' + formName.value + '_FloatValidations()');
        for (x in oFloat) {
        	var field = form[oFloat[x][0]];
        	
            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'textarea' ||
                field.type == 'select-one' ||
                field.type == 'radio') &&
                field.disabled == false) {
        
            	var value = '';
                // get field's value
                if (field.type == "select-one") {
                    var si = field.selectedIndex;
                    if (si >= 0) {
                        value = field.options[si].value;
                    }
                } else {
                    value = field.value;
                }
        
                if (value.length > 0) {
                    // remove '.' before checking digits
                    var tempArray = value.split('.');
                    //Strip off leading '0'
                    var zeroIndex = 0;
                    var joinedString= tempArray.join('');
                    while (joinedString.charAt(zeroIndex) == '0') {
                        zeroIndex++;
                    }
                    var noZeroString = joinedString.substring(zeroIndex,joinedString.length);

                    if (!isAllDigits(noZeroString)) {
                        bValid = false;
                        if (i == 0) {
                            focusField = field;
                        }
                        fields[i++] = oFloat[x][1];

                    } else {
	                var iValue = parseFloat(value);
	                if (isNaN(iValue)) {
	                    if (i == 0) {
	                        focusField = field;
	                    }
	                    fields[i++] = oFloat[x][1];
	                    bValid = false;
	                }
                    }
                }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return bValid;
    }


   /*$RCSfile: validateEmail.js,v $ $Revision: 1.9 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid email address.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateEmail(form) {
        var bValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name");


        oEmail = eval('new ' + formName.value + '_email()');

        for (x in oEmail) {
            var field = form[oEmail[x][0]];
            if ((field.type == 'hidden' || 
                 field.type == 'text' ||
                 field.type == 'textarea') &&
                (field.value.length > 0) &&
                field.disabled == false) {
                if (!checkEmail(field.value)) {
                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oEmail[x][1];
                    bValid = false;
                }
            }
        }
        if (fields.length > 0) {
            focusField.focus();
            alert(fields.join('\n'));
        }
        return bValid;
    }

    /**
     * Reference: Sandeep V. Tamhankar (stamhankar@hotmail.com),
     * http://javascript.internet.com
     */
    function checkEmail(emailStr) {
       if (emailStr.length == 0) {
           return true;
       }
       var emailPat=/^(.+)@(.+)$/;
       var specialChars="\\(\\)<>@,;:\\\\\\\"\\.\\[\\]";
       var validChars="\[^\\s" + specialChars + "\]";
       var quotedUser="(\"[^\"]*\")";
       var ipDomainPat=/^(\d{1,3})[.](\d{1,3})[.](\d{1,3})[.](\d{1,3})$/;
       var atom=validChars + '+';
       var word="(" + atom + "|" + quotedUser + ")";
       var userPat=new RegExp("^" + word + "(\\." + word + ")*$");
       var domainPat=new RegExp("^" + atom + "(\\." + atom + ")*$");
       var matchArray=emailStr.match(emailPat);
       if (matchArray == null) {
           return false;
       }
       var user=matchArray[1];
       var domain=matchArray[2];
       if (user.match(userPat) == null) {
           return false;
       }
       var IPArray = domain.match(ipDomainPat);
       if (IPArray != null) {
           for (var i = 1; i <= 4; i++) {
              if (IPArray[i] > 255) {
                 return false;
              }
           }
           return true;
       }
       var domainArray=domain.match(domainPat);
       if (domainArray == null) {
           return false;
       }
       var atomPat=new RegExp(atom,"g");
       var domArr=domain.match(atomPat);
       var len=domArr.length;
       if ((domArr[domArr.length-1].length < 2) ||
           (domArr[domArr.length-1].length > 3)) {
           return false;
       }
       if (len < 2) {
           return false;
       }
       return true;
    }

  


    /*$RCSfile: validateMask.js,v $ $Revision: 1.10 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * Check to see if fields are a valid using a regular expression.
    * Fields are not checked if they are disabled.
    * <p>
    * @param form The form validation is taking place on.
    */
    function validateMask(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name"); 

        oMasked = eval('new ' + formName.value + '_mask()');      
        for (x in oMasked) {
            var field = form[oMasked[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                 field.type == 'textarea' ||
				 field.type == 'file') &&
                 (field.value.length > 0) &&
                 field.disabled == false) {

                if (!matchPattern(field.value, oMasked[x][2]("mask"))) {
                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oMasked[x][1];
                    isValid = false;
                }
            }
        }

        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return isValid;
    }

    function matchPattern(value, mask) {
       return mask.exec(value);
    }


    /*$RCSfile: validateMinLength.js,v $ $Revision: 1.11 $ $Date: 2004/03/28 16:53:21 $ */
    /**
    * A field is considered valid if greater than the specified minimum.
    * Fields are not checked if they are disabled.
    * <p>
    * <strong>Caution:</strong> Using <code>validateMinLength</code> on a password field in a 
    *  login page gives unnecessary information away to hackers. While it only slightly
    *  weakens security, we suggest using it only when modifying a password.</p>
    * @param form The form validation is taking place on.
    */
    function validateMinLength(form) {
        var isValid = true;
        var focusField = null;
        var i = 0;
        var fields = new Array();
        var formName = form.getAttributeNode("name");


        oMinLength = eval('new ' + formName.value + '_minlength()');

        for (x in oMinLength) {
            var field = form[oMinLength[x][0]];

            if ((field.type == 'hidden' ||
                field.type == 'text' ||
                field.type == 'password' ||
                field.type == 'textarea') &&
                field.disabled == false) {

                var iMin = parseInt(oMinLength[x][2]("minlength"));
                if ((trim(field.value).length > 0) && (field.value.length < iMin)) {
                    if (i == 0) {
                        focusField = field;
                    }
                    fields[i++] = oMinLength[x][1];
                    isValid = false;
                }
            }
        }
        if (fields.length > 0) {
           focusField.focus();
           alert(fields.join('\n'));
        }
        return isValid;
    }


//End --> 
</SCRIPT>
    <SCRIPT LANGUAGE="JavaScript">
    <!--
// ----------------------------------------------------------------------------
// - Function to popup a new window.                                          -
// ----------------------------------------------------------------------------

 var newwindow = '';

function CreditSplit()
{

		newwindow=window.open('/coeus42/coeuslite/utk/propdev/cwCreditSplitForm.html','sList','height=10,width=400,resizable=yes,status=no,scrollbars=no');
		if (!newwindow.opener) newwindow.opener = _new;

  	    if (window.focus) {newwindow.focus()}
	    return true;
}

        function showList() {
               sList = window.open('/coeus42/coeuslite/utk/propdev/cwCreditSplitForm.html', 'sList','width=300,height=525,resizable=no,status=no,scrollbars=no');
				if(!sList.opener) {sList.opener = _new} // Open the new window!
				
				if (window.focus){sList.focus()}        // Focus on the new window!
//				return true;
//				remLink();
        }

        function remLink() {
        if (window.sList && window.sList.open && !window.sList.closed)
                window.sList.opener = null;
        }

    // -->
    </SCRIPT>

            <FORM name=generalInfoProposal onsubmit="return validateForm(this)" 
            action=/coeus/generalInfoProposal.do method=post>
            <TABLE class=table height="100%" cellSpacing=0 cellPadding=0 
            width="94%" border=0>
              <TBODY>
              <TR>
                <TD class=theader vAlign=top align=left width="5%" 
                  height=25>Investigator Information&nbsp;&nbsp; </TD>
              </TR>
              <TR>
                <TD vAlign=top align=left><FONT color=red>*</FONT> Marks 
                  Mandatory Fields </TD></TR>
              <TR>
                <TD vAlign=top align=left><FONT color=red>*</FONT> Owner 
                  Information(Person Entering Data) </TD></TR>
              <TR>
                <TD class=copybold align=middle></TD></TR>
              <TR>
                <TD class=copybold vAlign=top align=left>
                  <TABLE class=tabtable cellSpacing=0 cellPadding=4 width="99%" 
                  align=center border=0>
                    <TBODY>
                    <TR>
                      <TD vAlign=top align=left colSpan=4>
                        <TABLE class=tableheader height=20 cellSpacing=0 
                        cellPadding=0 width="100%" border=0>
                          <TBODY>
                          <TR 
                          style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BACKGROUND-IMAGE: url(/coeus42/coeuslite images/body_background.gif); BORDER-LEFT: 0px; BORDER-BOTTOM: 0px">
                            <TD>&nbsp;<FONT color=red>*</FONT> Investigator Information&nbsp;&nbsp;&nbsp;&nbsp; 
                              Proposal 
                    Number&nbsp;&nbsp;</TD>
                          </TR></TBODY></TABLE></TD></TR>
                    <TR>
                      <TD class=copybold width="15%">Created By</TD>
                      <TD class=copybold>Farrell, Jerry D.</TD></TR>
                    <TR>
                      <TD class=copybold width="15%">Last Updated By</TD></TR>
                    <TR>
                      <TD class=copybold width="15%">Status</TD>
                      <TD class=copybold>In Progress</TD></TR>
                    <TR>
                      <TD class=copybold width="15%">Lead Unit</TD>
                      <TD class=copybold>000001 :&nbsp;UT Board of Trustees 
                      II</TD></TR></TBODY></TABLE></TD></TR>
              <TR vAlign=top>
                <TD vAlign=top align=left height=45>
                  <TABLE class=tabtable cellSpacing=0 cellPadding=0 width="99%" 
                  align=center border=0>
                    <TBODY>
                    <TR>
                      <TD vAlign=top align=left colSpan=4>
                        <TABLE class=tableheader height=20 cellSpacing=0 
                        cellPadding=0 width="100%" border=0>
                          <TBODY>
                          <TR 
                          style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BACKGROUND-IMAGE: url(/coeus42/coeuslite images/body_background.gif); BORDER-LEFT: 0px; BORDER-BOTTOM: 0px">
                            <TD>&nbsp;Investigator Details 
                    </TD>
                          </TR></TBODY></TABLE></TD></TR>
                    <TR>
                      <TD align=middle><div align="center">
                        <p align="left"><span class="copy"><font color="red">*</font> MANDATORY - Investigator(s) Name(s) - This field will need to be searchable to find the PI and co-PI(s) in COEUS. This person must exist within COEUS for this form to be used.:<html:options collection="ProtocolTypes" property="code" labelProperty="description"/> </span><BR>
    <BR>
    <font color="red">*</font> Add Investigator Information:</p>
                        <p align="left">Last Name:&nbsp; &nbsp;
                            <INPUT type="text" name="textfield" style="vertical-align : middle;">
                            <input type="checkbox" name="checkbox" value="checkbox">
  Employee&nbsp;&nbsp;&nbsp;&nbsp;<a href="/coeus42/coeuslite/utk/propdev/tiles/cwProposalDevelopmentInvestigatorsTile.jsp">search</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
                        <p align="left">First Name:&nbsp;&nbsp;
                            <INPUT type="text" name="textfield" style="vertical-align : middle;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                        <p align="left"> Employee ID:&nbsp; <em>(Populated from user table or manually by PI</em>) </p>
                        <p align="left"> Unit Name:&nbsp;
                            <INPUT type="text" name="textfield" style="vertical-align : middle;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                        <p align="left">Unit Number
                            <input type="text" name="textfield">
&nbsp; <a href="/coeus42/coeuslite/utk/propdev/tiles/cwProposalDevelopmentInvestigatorsTile.jsp">search</a>
  <INPUT type="checkbox" name="checkbox" value="checkbox" style="vertical-align : middle;">
  <strong>Lead Unit</strong></p>
                        <p align="left">Phone:&nbsp;&nbsp;<em>(Populated from user table or manually by PI)</em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E-Mail:&nbsp; <em>(Populated from user table or manually by PI)</em></p>
                        <p align="left">Role:
                            <select name="select">
                              <option value="Lead Investigator">Lead Investigator</option>
                              <option value="Co Investigator">Co Investigator</option>
                              <option value="Key Person">Key Person</option>
                            </select>
                            <input type="submit" name="Submit" value="Certify Investigator">
                        </p>
                        <p align="left"> <BR>
  Cost Center:&nbsp;
  <INPUT type="text" name="textfield" style="vertical-align : middle;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
                        <p align="left">
                          <INPUT type="checkbox" name="checkbox" value="checkbox" style="vertical-align : middle;">
  Account Setup<em> (only the lead PI <strong>must</strong> be selected. Optional for additional PIs)</em> </p>
                        <p align="left">Pay Type:&nbsp;(check all that apply)
                            <input name="textfield" type="text" size="3" maxlength="3">
  % Effort <br>
  <label>
  <input type="checkbox" name="checkbox" value="checkbox">
  R - Release</label>
  <label> <br>
  <input type="checkbox" name="checkbox" value="checkbox">
  S - Summer</label>
  <label> <br>
  <input type="checkbox" name="checkbox" value="checkbox">
  N/A - Not Applicable</label>
  <BR>
                        </p>
                        <p align="left"><BR>
                        </p>
                        <p>
                          <INPUT class=clbutton type=submit value=Save name=Save> 
                        </p>
                        <p align="center"><span class="copy"><a href="javascript:showList()" title="click to enter credit split">Credit Split</a> :&nbsp;&nbsp;Credit Split (add all investigators first, % of all investigators must = 100%)</span></p>
                      </div>
                        <div align="center">
                          <table width="100%"  border="0" cellpadding="0" cellspacing="0">
                            <tr>
                              <td><table width="100%"  border="0" cellpadding="0" cellspacing="0" STYLE="background-image:url('/coeus42/coeuslite/utk/web images/coeusirb/tableheader_background.gif');border:0">
                                  <tr>
                                    <td width="1%"><img src="/coeus42/coeuslite/utk/web images/coeusirb/spacer.gif" width="5" height="25"> </td>
                                    <td class="copybold"><span class="copyboldred">&gt;&gt;</span> List of Data Items: <span class="copysmall">(to edit the information, remove first, then, add back) </span> </td>
                                  </tr>
                              </table></td>
                            </tr>
                            <tr align="center">
                              <td colspan="3"><br>
                                  <table width="100%"  border="0" cellpadding="0" class="tablemainsub2">
                                    <tr>
                                      <td width="30%" align="center" class="tableheadersub3"><p>Lead<br>
                Investigator</p></td>
                                      <td width="30%" align="left" class="tableheadersub3"><div align="center">Name</div></td>
                                      <td width="15%" align="left" class="tableheadersub3"><div align="center">Department</div></td>
                                      <td width="30%" align="left" class="tableheadersub3"><p align="center">Lead<br>
                Unit <br>
                                      </p></td>
                                      <td width="30%" align="left" class="tableheadersub3"><div align="center">Role</div></td>
                                      <td width="10%" align="left" class="tableheadersub3"><div align="center">% Project </div></td>
                                      <td width="10%" align="left" class="tableheadersub3"><div align="center">Account Setup </div></td>
                                      <%if(!modeValue){%>
                                      <td width="10%" align="left" class="tableheadersub3">&nbsp;</td>
                                      <%}%>
                                    </tr>
                                    <tr bgcolor="#EFEFEF" valign="top">
                                      <td align="left" nowrap class="copy"><div align="center">
                                          <input name="checkbox" type="checkbox" value="checkbox" checked>
                                      </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Doe, John P. </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Department of Philosophy</div></td>
                                      <td align="left" valign="middle" nowrap class="copy"><div align="center"> </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Lead Investigator</div></td>
                                      <td align="center" nowrap class="copy"><input name="row1" type="text" id="row1" size="6"></td>
                                      <td align="center" nowrap class="copy">&nbsp;</td>
                                      <td align="center" nowrap class="copy"><a href="javascript:delete_data()">Remove</a></td>
                                    </tr>
                                    <tr bgcolor="#EFEFEF" valign="top">
                                      <td align="left" nowrap class="copy"><center>
                                          <input type="checkbox" name="checkbox" value="checkbox">
                                      </center></td>
                                      <td align="left" nowrap class="copy"><div align="center">Buster Sommer </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Department of Research </div></td>
                                      <td align="left" valign="middle" nowrap class="copy"><div align="center">
                                          <input name="checkbox" type="checkbox" value="checkbox" checked>
                                      </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Key Person </div></td>
                                      <td align="center" nowrap class="copy"><input name="row2" type="text" id="row2" size="6"></td>
                                      <td align="center" nowrap class="copy">&nbsp;</td>
                                      <td align="center" nowrap class="copy"><a href="javascript:delete_data()">Remove</a></td>
                                    </tr>
                                    <tr bgcolor="#EFEFEF" valign="top">
                                      <td align="left" nowrap class="copy"><div align="center">
                                          <p>
                                            <input type="checkbox" name="checkbox" value="checkbox">
                                          </p>
                                      </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Smith, Jane </div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Department of Psychology </div></td>
                                      <td align="left" valign="middle" nowrap class="copy"><div align="center"></div></td>
                                      <td align="left" nowrap class="copy"><div align="center">Co-Investigator</div></td>
                                      <td align="center" nowrap class="copy"><input name="row3" type="text" id="row3" size="6"></td>
                                      <td align="center" nowrap class="copy">&nbsp;</td>
                                      <td align="center" nowrap class="copy"><a href="javascript:delete_data()">Remove</a> </td>
                                    </tr>
                                </table></td>
                            </tr>
                            <tr align="center">
                              <td height="22" colspan="3">&nbsp;</td>
                            </tr>
                          </table>
                          <% }%>
  <p align="left">&nbsp;                                  </p>
                      </div></TD></TR></TBODY></TABLE></TD></TR><INPUT type=hidden 
              name=sponsorCode> <INPUT type=hidden name=primeSponsorCode> <INPUT 
              type=hidden name=organizationId> <INPUT type=hidden 
              name=performingOrganizationId> <INPUT type=hidden value=I 
              name=acType> <INPUT type=hidden name=updateTimestamp> <INPUT 
              type=hidden name=proposalNumber> <INPUT type=hidden 
              name=statusCode> <INPUT type=hidden name=creationStatusCode> 
              <INPUT type=hidden name=templateFlag> <INPUT type=hidden 
              value=000001 name=unitNumber> <INPUT type=hidden 
              value="UT Board of Trustees II" name=unitName> <INPUT type=hidden 
              name=mailingAddresId> </TBODY></TABLE></FORM>
            <SCRIPT>
            var startDate = new calendar2(document.forms['generalInfoProposal'].elements['startDate']);
            startDate.year_scroll = true;
            startDate.time_comp = false;
            
            
            var endDate = new calendar2(document.forms['generalInfoProposal'].elements['endDate']);
            endDate.year_scroll = true;
            endDate.time_comp = false; 
            
            var deadLineDate = new calendar2(document.forms['generalInfoProposal'].elements['deadLineDate']);
            deadLineDate.year_scroll = true;
            deadLineDate.time_comp = false;
            
        </SCRIPT>
          </TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD vAlign=top width=975>&nbsp;      </TD></TR></TABLE>
</BODY></HTML>
